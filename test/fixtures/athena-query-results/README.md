## Athena queries fixtures

This directory holds data for testing Athena results parsing. Each file was generated by running the following queries:

### File: locations-up-to-2016.json

Get distinct locations in a set of countries, some of them include locations with "null" coordinates.

```
SELECT
  UPPER(country) as country,
  round(coordinates.longitude, 5) AS lon,
  round(coordinates.latitude, 5) AS lat,
  min(date.local) AS firstUpdated,
  max(date.local) AS lastUpdated,
  sourcename as sourceName,
  sourcetype as sourceType,
  city,
  location
FROM measurements
WHERE (year(from_iso8601_timestamp(date.local)) <= 2016) AND
  UPPER(country) = ANY (VALUES 'BR', 'GB', 'PL', 'NL', 'IT')
GROUP BY
  UPPER(country),
  round(coordinates.longitude,5),
  round(coordinates.latitude,5),
  sourcename,
  sourcetype,
  city,
  location      
ORDER BY
  country, 
  firstUpdated
```

### File: locations-up-to-2018.json

```
SELECT
  UPPER(country) as country,
  round(coordinates.longitude, 5) AS lon,
  round(coordinates.latitude, 5) AS lat,
  min(date.local) AS firstUpdated,
  max(date.local) AS lastUpdated,
  sourcename as sourceName,
  sourcetype as sourceType,
  city,
  location
FROM measurements
WHERE (year(from_iso8601_timestamp(date.local)) <= 2018) AND
  UPPER(country) = ANY (VALUES 'BR', 'GB', 'PL', 'NL' 'IT')
GROUP BY
  UPPER(country),
  round(coordinates.longitude,5),
  round(coordinates.latitude,5),
  sourcename,
  sourcetype,
  city,
  location      
ORDER BY
  country, 
  firstUpdated
```

### File: parameters-up-to-2016.json

```
SELECT
  UPPER(country) as country,
  round(coordinates.longitude, 5) AS lon,
  round(coordinates.latitude, 5) AS lat,
  parameter,
  COUNT(parameter) AS count
FROM measurements
WHERE year(from_iso8601_timestamp(date.local)) <= 2016 AND
  UPPER(country) = ANY (VALUES 'BR', 'GB', 'PL', 'NL', 'IT')
GROUP BY
  UPPER(country),
  round(coordinates.longitude,5),
  round(coordinates.latitude,5),
  parameter
```

### File: parameters-up-to-2018.json

```
SELECT
  UPPER(country) as country,
  round(coordinates.longitude, 5) AS lon,
  round(coordinates.latitude, 5) AS lat,
  parameter,
  COUNT(parameter) AS count
FROM measurements
WHERE year(from_iso8601_timestamp(date.local)) <= 2018 AND
  UPPER(country) = ANY (VALUES 'BR', 'GB', 'PL', 'NL', 'IT')
GROUP BY
  UPPER(country),
  round(coordinates.longitude,5),
  round(coordinates.latitude,5),
  parameter
```